---
import { getImage } from 'astro:assets';
import Layout from '../layouts/Layout.astro';
import Container from '../components/layout/Container.astro';
import Section from '../components/layout/Section.astro';
import Navigation from '../components/layout/Navigation';
import Footer from '../components/layout/Footer';
import ScrollProgress from '../components/effects/ScrollProgress';
import HeroHome from '../components/hero/HeroHome';
import LogoBar from '../components/social-proof/LogoBar';
import FeatureList from '../components/features/FeatureList';
import BentoGrid from '../components/features/BentoGrid';
import BentoCard from '../components/features/BentoCard';
import FeatureShowcase from '../components/features/FeatureShowcase';
import StatsBar from '../components/social-proof/StatsBar';
import TestimonialCarousel from '../components/social-proof/TestimonialCarousel';
import PricingTable from '../components/pricing/PricingTable';
import GradientOrb from '../components/effects/GradientOrb';
import GridBackground from '../components/effects/GridBackground';
import ParticleField from '../components/effects/ParticleField';

import { homeFeatures, featureShowcases } from '../data/features';
import { carouselTestimonials } from '../data/testimonials';
import { plans } from '../data/pricing';

import codeGenImg from '../assets/features/code-generation.jpg';
import testingImg from '../assets/features/testing-automation.jpg';

const optimizedCodeGen = await getImage({ src: codeGenImg, format: 'webp', width: 800 });
const optimizedTesting = await getImage({ src: testingImg, format: 'webp', width: 800 });
---

<Layout>
  <ScrollProgress client:load />
  <Navigation client:load links={[
    { label: "Features", href: "/ai-saas-premium/features/" },
    { label: "Pricing", href: "/ai-saas-premium/pricing/" },
    { label: "About", href: "/ai-saas-premium/about/" },
    { label: "Contact", href: "/ai-saas-premium/contact/" },
  ]} />

  <!-- Hero -->
  <HeroHome client:load />

  <!-- Logo Bar -->
  <Section size="sm">
    <LogoBar client:load logos={["Vercel", "Stripe", "Supabase", "Planetscale", "Linear", "Figma", "GitHub", "Slack"]} />
  </Section>

  <!-- Feature List -->
  <Section variant="elevated">
    <Container>
      <div class="text-center fade-up">
        <p class="section-label" style="justify-content: center;">Why NexusAI</p>
        <h2 style="margin-bottom: var(--space-10);">Everything your team needs to ship AI</h2>
      </div>
    </Container>
    <FeatureList client:load features={homeFeatures.map(f => ({ icon: f.icon, title: f.title, description: f.description }))} />
  </Section>

  <!-- Bento Grid -->
  <Section>
    <ParticleField client:load count={150} />
    <GradientOrb client:load color="rgba(139, 92, 246, 0.15)" size={600} top="20%" left="10%" />
    <GradientOrb client:load color="rgba(34, 211, 238, 0.1)" size={500} top="60%" left="70%" delay={3} />
    <Container>
      <div class="text-center fade-up">
        <p class="section-label" style="justify-content: center;">Platform</p>
        <h2 style="margin-bottom: var(--space-10);">One platform, infinite possibilities</h2>
      </div>
    </Container>
    <BentoGrid client:load>
      {homeFeatures.map((f, i) => (
        <BentoCard client:load icon={f.icon} title={f.title} description={f.description} stat={f.stat} size={i === 0 ? "large" : i === 3 ? "medium" : "small"} />
      ))}
    </BentoGrid>
  </Section>

  <!-- Feature Showcases -->
  <Section>
    <FeatureShowcase client:load {...featureShowcases[0]} imageSrc={optimizedCodeGen.src} imageAlt="AI code generation interface" />
  </Section>
  <Section>
    <FeatureShowcase client:load {...featureShowcases[1]} imageSrc={optimizedTesting.src} imageAlt="Automated testing dashboard" />
  </Section>

  <!-- Stats Bar -->
  <Section>
    <Container>
      <div class="text-center fade-up">
        <p class="section-label" style="justify-content: center;">By the Numbers</p>
        <h2 style="margin-bottom: var(--space-8);">Trusted by developers worldwide</h2>
      </div>
    </Container>
    <StatsBar client:load stats={[
      { value: 10000, suffix: "+", label: "Active Developers" },
      { value: 99, suffix: ".9%", label: "Uptime SLA" },
      { value: 150, suffix: "+", label: "Countries" },
      { value: 94, suffix: "ms", label: "Avg Deploy Time" },
    ]} />
  </Section>

  <!-- Testimonial Carousel -->
  <Section variant="elevated">
    <Container>
      <div class="text-center fade-up">
        <p class="section-label" style="justify-content: center;">Testimonials</p>
        <h2 style="margin-bottom: var(--space-10);">Loved by developers everywhere</h2>
      </div>
    </Container>
    <TestimonialCarousel client:load testimonials={carouselTestimonials} />
  </Section>

  <!-- Pricing Preview -->
  <Section id="pricing">
    <ParticleField client:load count={80} />
    <GradientOrb client:load color="rgba(34, 211, 238, 0.12)" size={500} top="30%" left="80%" />
    <GradientOrb client:load color="rgba(139, 92, 246, 0.08)" size={400} top="70%" left="15%" delay={2} />
    <Container>
      <div class="text-center fade-up">
        <p class="section-label" style="justify-content: center;">Pricing</p>
        <h2 style="margin-bottom: var(--space-4);">Simple, transparent pricing</h2>
        <p class="fade-up" style="max-width: 600px; margin: 0 auto var(--space-10); color: var(--text-secondary);">Start free, scale as you grow. No hidden fees, no surprises.</p>
      </div>
    </Container>
    <PricingTable client:load plans={plans} />
  </Section>

  <!-- CTA Banner -->
  <Section size="lg" id="cta" class="cta-section">
    <div style="position: relative; overflow: hidden; border-radius: var(--radius-2xl); background: var(--gradient-primary); padding: var(--space-16) var(--space-8); text-align: center; max-width: 1200px; margin: 0 auto;">
      <GradientOrb client:load color="rgba(255,255,255,0.1)" size={400} top="0%" left="10%" />
      <GradientOrb client:load color="rgba(34,211,238,0.15)" size={300} top="50%" left="80%" delay={3} />
      <div class="fade-up" style="position: relative; z-index: 1;">
        <h2 style="font-size: var(--text-4xl); color: white; margin-bottom: var(--space-4);">Ready to ship smarter?</h2>
        <p style="font-size: var(--text-body-lg); color: rgba(255,255,255,0.85); max-width: 500px; margin: 0 auto var(--space-8);">Join 10,000+ developers building the future with NexusAI. Start your free trial today.</p>
        <div style="display: flex; gap: var(--space-4); justify-content: center; flex-wrap: wrap;">
          <a href="#" class="cta-button-primary">Start Free Trial</a>
          <a href={import.meta.env.BASE_URL + 'contact/'} class="cta-button-secondary">Talk to Sales</a>
        </div>
      </div>
    </div>
  </Section>

  <Footer client:load />
</Layout>
